{% extends 'master.html' %}
{% load static %}
{% block body %}
<!-- inner-banner -->
<section class="inner-banner" id="home">
   <div class="inner-layer">
      <div class="container">
      </div>
   </div>
</section>
<!-- //inner-banner -->
<!-- breadcrumb -->
<div class="breadcrumb-w3pvt">
   <div class="container">
      <nav aria-label="breadcrumb">
         <ol class="breadcrumb">
            <li class="breadcrumb-item">
               <a href="{% url 'index' %}">Home</a>
            </li>
            <li class="breadcrumb-item">
               <a href="{% url 'login' %}">Log In</a>
            </li>
            <li class="breadcrumb-item" aria-current="page">Create New Account</li>
         </ol>
      </nav>
   </div>
</div>
<!-- contact -->
<section class="contact py-5">
   <div class="container py-lg-5">
      <h2 class="heading mb-sm-5 mb-4">Create Your New <strong> Account </strong></h2>
      <div class="row">
         <div class="col-lg-4 col-md-6 contact-form mt-md-0 mt-sm-5 mt-4">
            <h4 class="mb-4 w3f_title">Fill Form Carefully</h4>
            {% if messages %}
            <div class="alert alert-info">
               <ul class="mb-0">
                  {% for message in messages %}
                  <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                  {% endfor %}
               </ul>
            </div>
            {% endif %}
          <form name="signup" id="signup" method="post" action="{% url 'signup' %}" enctype="multipart/form-data" onsubmit="return(validate());" novalidate="novalidate">
    {% csrf_token %}
    <div class="form-group">
        <label>Username</label>
        <input type="text" class="form-control" placeholder="Enter Username" name="username" value="{{ name }}">
    </div>
    <div class="form-group">
        <label>Name</label>
        <input type="text" class="form-control" placeholder="Enter Name" name="name" value="{{ name }}">
    </div>
    <div class="form-group">
        <label>Email</label>
        <input type="email" class="form-control" placeholder="Enter Email" name="email" value="{{ email }}">
    </div>
    <div class="form-group">
        <label for="gender">Gender</label>
        <select class="form-control" id="gender" name="gender" style="height: 60px;" required>
            <option value="" disabled {% if not gender %}selected{% endif %}>Select Gender</option>
            <option value="Male" {% if gender == 'Male' %}selected{% endif %}>Male</option>
            <option value="Female" {% if gender == 'Female' %}selected{% endif %}>Female</option>
            <option value="Other" {% if gender == 'Other' %}selected{% endif %}>Other</option>
        </select>
    </div>
    <div class="form-group">
        <label for="mobile">Mobile</label>
        <input type="text" class="form-control" id="mobile" name="mobile" value="{{ phone }}" required>
    </div>
    <div class="form-group">
        <label for="dob">Date of Birth</label>
        <input type="date" class="form-control" id="dob" name="dob" value="{{ dob }}" required>
    </div>
    <div class="form-group">
        <label>Address</label>
        <textarea class="form-control" name="address" placeholder="Enter Your Address"></textarea>
    </div>
    <div class="form-group">
        <label for="password">Password</label>
        <div class="password-container">
            <input type="password" class="form-control password-input" id="password" name="password" required>
            <i class="fas fa-eye eye-icon" id="togglePassword"></i>
        </div>
    </div>

    <button type="submit" class="btn btn-default">Submit</button>
</form>

         </div>
         <div class="col-lg-4 col-md-6 contact-address">
            <h4 class="mb-4 w3f_title">Sign Up By Social Media</h4>
            <ul class="list-w3">
                 <li><a style="text-decoration: none;" href="#">
                     <i class="bi bi-facebook" style="font-size: 24px; vertical-align: middle; color: #4267B2;"></i>
                     <span style="vertical-align: middle;">Sign in with Meta</span></a>
                </li><a style="text-decoration: none;" href="{% url 'social:begin' 'google-oauth2' %}">
                <li class="my-3"><i class="fab fa-google" style="font-size: 24px; vertical-align: middle; color: #D44638;"></i>
                    <span style="vertical-align: middle;">Sign in with Gmail</span></a>
                </li>
            </ul>

            <h4 class="mt-sm-5 mt-4 mb-3 w3f_title">You Can Contact Our Team</h4>
            <p>We are available for you 24*7</p>

            <ul class="list-w3">
                <li class="my-3"><span class="fa mr-1 fa-phone"></span>+91 7903539817</li>
                <li class="my-3"><span class="fa mr-1 fa-phone"></span>+91 8409202262</li>
                <li class=""><span class="fa mr-1 fa-envelope"></span><a href="mailto:anshumk123@gmail.com">anshumk123@gmail.com</a></li>
            </ul>
         </div>
         <div class="col-lg-4 contact-map mt-lg-0 mt-sm-5 mt-4">
            <h4 class="mb-4 w3f_title"></h4>
            <img src="{% static 'advertisment_img/codeand-debug.gif' %}" alt="Code and Debug GIF" class="img-fluid" style="width: 1000px; height: 400px;">
        </div>
      </div>
   </div>
</section>
<link rel="stylesheet" href="{% static 'css/signup.css' %}">
<script src="{% static 'js/signup.js' %}"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"> <!-- for meta icon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- for gmail icon -->

<!-- Show modal if there are messages -->
{% if messages %}
<script>
   $(document).ready(function(){
       $('#successModal').modal('show');
   });
</script>
{% endif %}
<!-- //contact -->

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const userData = {{ user_data|safe }}; // Assuming user_data is passed to the template

        if (userData) {
            document.querySelector('input[name="username"]').value = userData.username;
            document.querySelector('input[name="email"]').value = userData.email;
            document.querySelector('input[name="mobile"]').value = userData.mobile || '';
            document.querySelector('select[name="gender"]').value = userData.gender || '';
            document.querySelector('input[name="dob"]').value = userData.dob || '';
        }
    });
</script>
{% endblock %}